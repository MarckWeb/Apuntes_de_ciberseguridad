## Comandos Intermedios

Estos comandos son útiles para la administración del sistema y manipulación de archivos.

- __nano o vi (Text Editors)__ -. Abre un archivo en el editor de texto nano o vi.

```bash
nano nombre_del_archivo_a_editar
```

```bash
vi nombre_del_archivo_a_editar
```
Para salir de VI  solo basta con colocar :q en el modo normal de VI (pulsando ESC se consigue el modo normal), de esta manera podrás salir sin problema. En el modo normal también puedes combinar comandos como por ejemplo :wq, guarda (w) y cierra el programa (q). VI ejecuta los comandos de izquierda a derecha, es importante esto.


- __head (head)__ -. El comando head obtiene las n-primeras líneas de un archivo. Como opciones se puede utilizar:

    - c N: obtiene los N primeros caracteres del contenido del archivo.
    - n N: obtiene los N primeras líneas del contenido del archivo (por defecto head muestra las 10 primeras líneas).

```bash
head opciones archivo.txt
```

- __tail (tail)__ -. El comando tail obtiene las n-últimas líneas del contenido de un archivo. Las opciones más destacables de este comando son:

    - c N: obtiene los N últimos caracteres del contenido del archivo.
    - n N: obtiene las N últimas líneas del contenido del archivo.
    - f: muestra las últimas líneas del contenido del fichero, y deja el comando a espera para ir imprimiendo las nuevas líneas que se vayan escribiendo en dicho fichero.

```bash
tail opciones archivo.txt
```

- __chmod (Change Mode)__ -. Cambia los permisos de un archivo o directorio (-rw-rwx---). 

```bash
chmod 755 nombre_del_archivo.
```
Otra forma de escribir es asignando + o - para agregar permiso, o para eliminarlo. Después ingresamos uno o más símbolos de permiso (r, w, x).

```bash
chmod u+rw filename # usuario puede leer, escribir
chmod u-r filename # usuario solo puede leer
```

- __chown (Change Owner)__ -. Cambia el propietario de un archivo o directorio. Los : puntos separan usuario y grupo.

```bash
chown usuario:grupo nombre_del_archivo
```
para que un archivo pertenezca a un nuevo usuario se coloca

```bash
chown nuevo_usuario archivo.txt
```

cambiar el usuario y el grupo del archivo:

```bash
chown nuevo_usuario:grupo_usuario archivo.txt
```
Cambiar grupo de un directorio:

```bash
chown -R :grupo_usuario nombre_directorio
```

- __grep (global regular expression print )__ -. Busca patrones dentro de archivos.

```bash
grep "patrón" nombre_del_archivo
```

```bash
# buscar un texto o patron en dos archivo
grep "texto" archivo1.txt archivo2.txt
```

```bash
# buscar un texto o patron en todos los .txt
grep "texto" *.txt
```

```bash
# buscar un texto o patron en todo
# este directorio
grep -r "texto" nombre_directorio/
```

```bash
# ignora mayus o minus del patron
grep -i "texto" archivo.txt
```

```bash
# buscar el patro dentro de resultado de whois
whois dominio.com | grep '@dominio.com'
```

- __which (cual)__ -. Se utiliza para mostrar la ruta completa del comando en cuestión, es decir donde esta almacenado

```bash
┌──(marck㉿kali)-[~]
└─$ which spiderfoot 

----------Salida-----------
/usr/bin/spiderfoot

# 2-. Ejemplo
┌──(marck㉿kali)-[~]
└─$ which dig  

----------Salida-----------
/usr/bin/dig
```

- __type (Tipo)__ -. Parecido a wich pero tambien puede utilizarse para determinar la información acerca de varios comandoso

```bash
┌──(marck㉿kali)-[~]
└─$ type which                                               

----------Salida-----------
which is a shell builtin

# 2-. Ejemplo
┌──(marck㉿kali)-[~]
└─$ type ls 

----------Salida-----------
ls is an alias for ls --color=auto
                                                                                                  
┌──(marck㉿kali)-[~]
└─$ type chmod 

----------Salida-----------
chmod is /usr/bin/chmod
```
Usando la opción -a, el comando type también puede revelar la ruta de otro comando:

```bash
┌──(marck㉿kali)-[~]
└─$ type -a echo
echo is a shell builtin
echo is /usr/bin/echo
echo is /bin/echo
```

- __alias (Alias)__ -. se crean para colocar en un comando una secuencia de comandos y  parametros. Solo existen mientras la shell esta abierta

```bash
┌──(marck㉿kali)-[~]
└─$ alias listar='ls -l-a'                                             

----------Salida-----------
alias guardado si no sale nada en la terminal

# Usamos el alias
┌──(marck㉿kali)-[~]
└─$ listar

----------Salida-----------
drwxr-xr-x 1 sysadmin sysadmin   20 Jun 28 14:05 .                              
drwxr-xr-x 1 root     root       22 Mar 14  2016 ..                                                    
drwx------ 2 sysadmin sysadmin   34 Jun 28 14:05 .cache                                               
drwxr-xr-x 2 sysadmin sysadmin    6 Mar 14  2016 Documents
```
## Globbing
Los caracteres de globbing se denominan a menudo como "comodines". Estos son símbolos que tienen un significado especial para el shell.

### Asterisco (*)
El asterisco se utiliza para representar cero o más de cualquier carácter en un nombre de archivo, Es decir buscame todos estos archivos o directorios que empiezen con este caracter o tambien que terminen 

```bash
┌──(marck㉿kali)-[~]
└─$ echo Desktop/c*   

----------Salida-----------
Desktop/crypto Desktop/curso_bash

┌──(marck㉿kali)-[~]
└─$ ls -l -a c*

┌──(marck㉿kali)-[~]
└─$ ls -l sfa* 

----------Salida-----------
-rw-r--r-- 1 marck marck 4089 Jun  7 21:48 sfa_cert.html
-rw-r--r-- 1 marck marck    0 Jun  7 21:46 sfa_cert2.html

```

### Signo de Interrogación (?)

El signo de interrogación representa cualquier carácter único. Cada caracter del nombre del archivo o directorio representa un signo ?

```bash
┌──(marck㉿kali)-[~]
└─$ ls -l Downloads/*.???

----------Salida-----------
-rw-rw-r-- 1 marck marck 3462429 Jun 24 18:59  Downloads/InsecureBankv2.apk
-rw-r--r-- 1 marck marck  234081 Jun  3 19:16  Downloads/WindowsXP_1551719014755.jpg                                                      
-rw-r--r-- 1 marck marck   58860 Jun  7 22:25  Downloads/graph.png
```

### Corchetes [ ]

se utilizan para imprimir cualquier archivo que empiecen con los caracteres dentro de los corchetes.

```bash
┌──(marck㉿kali)-[~]
└─$ echo /etc/[gu]*   

----------Salida-----------
/etc/gai.conf /etc/groff /etc/group /etc/group- /etc/gshadow /etc/gshadow- /etc/ucf.conf /etc/udev /etc/ufw /etc/update-motd.d /etc/updatedb.conf
```
- echo /etc/[a-d]* mostrará todos los archivos que comiencen con cualquier letra entre e incluyendo a y d

- echo /etc/*[0-9]* mostrará todos los archivos que contienen al menos un número

- Si proporcionas un orden inválido, no se registrará ninguna coincidencia:

### Signo de Exclamación (!)

El signo de exclamación se utiliza en conjunto con los corchetes para negar un intervalo. Por ejemplo, el comando echo [!DP]* mostrará cualquier archivo que no comienza con D o P

### Comilla Invertida

Las comillas invertidas se utilizan para especificar un comando dentro de un comando, un proceso de sustitución del comando. Esto permite un uso muy potente y sofisticado de los comandos.

```bash
┌──(marck㉿kali)-[~]
└─$ echo hoy dia es `date`  

----------Salida-----------
hoy dia es Mon Nov 2 03:40:04 UTC 201
# Si no ponemos las comillas dobles el echo tomara 
# a echo como un texto normal
```
